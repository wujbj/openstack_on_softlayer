{
  "name": "openstack",
  "description": "",
  "cookbook_versions": {
  },
  "json_class": "Chef::Environment",
  "chef_type": "environment",
  "default_attributes": {
    "package_component": "grizzly",
    "floating": "false",
    "platform_family": "rhel"
  },
  "override_attributes": {
    "network_type": "nova",
    "iptables": {"enabled": true},
    "openstack": {
      "developer_mode": true,
      "mq": {
        "service_type": "qpid"
      },
      "db": {
        "service_type": "mysql",
        "bind_interface": "eth0",
        "compute": {
          "db_name": "nova",
          "host": "10.90.34.198",
          "port": "3306",
          "db_type": "mysql"
        },
        "identity": {
          "db_name": "keystone",
          "host": "10.90.34.198",
          "port": "3306",
          "db_type": "mysql"
        },
        "volume": {
          "db_name": "cinder",
          "host": "10.90.34.198",
          "port": "3306",
          "db_type": "mysql"
        },
        "network": {
          "db_name": "network",
           "host": "10.90.34.198",
           "port": "3306",
           "db_type": "mysql"
        },
        "dashboard": {
          "db_name": "horizon",
          "host": "10.90.34.198",
          "port": "3306",
          "db_type": "mysql"
        },
        "metering": {
          "db_name": "ceilometer",
          "host": "10.90.34.198",
          "port": "3306",
          "db_type": "mysql"
        },
        "image": {
          "db_name": "glance",
          "host": "10.90.34.198",
          "port": "3306",
          "db_type": "mysql"
        }
      },
      "compute": {
        "bind_interface": "eth0",
        "ec2": false,
        "network": {
          "service_type": "nova",
          "plugins": ["openvswitch"],
          "nova": {
            "libvirt_vif_driver": "nova.virt.libvirt.vif.LibvirtOpenVswitchVirtualPortDriver",
            "linuxnet_interface_driver": "nova.network.linux_net.LinuxOVSInterfaceDriver"
          },
	  "multi_host": true
        },
	"networks": [
          {
            "dns1": "172.16.0.1",
            "bridge_dev": "eth1",
            "num_networks": "1",
            "label": "vmnet",
            "bridge": "br-vmnet",
            "network_size": "16",
            "ipv4_cidr": "198.23.74.192/28"
          }
        ], 
        "novnc_proxy": {
	   "bind_interface": "eth0"
	},
        "xvpvnc_proxy": {
	   "bind_interface": "eth0"
        },
        "libvirt": {
	   "bind_interface": "eth0"
        },
        "db": {
          "username": "nova"
        },
        "mq": {
          "service_type": "qpid",
          "qpid": {
            "host": "10.90.34.198"
           }
        }
      },
      "identity": {
        "bind_interface": "eth0",
        "db": {
          "username": "keystone"
        }
      },
      "image": {
        "api": {
          "bind_interface": "eth0"
        },
        "registry": {
          "bind_interface": "eth0"
        },
        "db": {
          "username": "glance"
        },
        "mq": {
	  "service_type": "qpid",
          "qpid": {
            "host": "10.90.34.198"
          }
        },
        "image_upload": true,
        "upload_images": [ "cirros", "precise" ],
        "upload_image": {
          "cirros": "http://10.66.222.226:8080/images/cirros-0.3.0-x86_64-uec.tar.gz",
	  "precise": "http://10.66.222.226:8080/images/precise-server-cloudimg-amd64-disk1.img"
        }
      },
      "block-storage": {
        "db": {
          "username": "cinder"
        },
	"mq": {
	  "service_type": "qpid",
          "qpid": {
            "host": "10.90.34.198"
          }
        }
      },
      "volume": {
        "db": {
          "username": "cinder"
        },
        "mq": {
          "service_type": "qpid",
          "qpid": {
            "host": "10.90.34.198"
          }   
        }   
      },
      "network": {
        "api": {
          "bind_interface": "eth0"
        },
        "networks": [
          {
            "dns1": "172.16.0.1",
            "bridge_dev": "eth1",
            "num_networks": "1",
            "label": "vmnet",
            "bridge": "br-vmnet",
            "network_size": "16",
            "ipv4_cidr": "198.23.74.192/28"
          }
        ],
        "use_namespaces": "False",
        "metadata": {
          "nova_metadata_ip": "10.90.34.198"
        },
	"quota": {
	  "port": "50"
        },
        "openvswitch": {
          "tenant_network_type": "gre",
          "enable_tunneling" : "true",
          "tunnel_id_ranges" : "1:1000",
          "local_ip_interface": "eth0",
          "physical_network_interface": "eth1",
          "bridge_mappings" : "physnet1:br-eth1",
          "network_vlan_ranges" : "520:550"
        },
        "l3": {
          "external_network_bridge_interface": "eth2"
        },
        "db": {
          "username": "network"
        },
        "mq": {
          "service_type": "qpid",
          "qpid": {
            "host": "10.90.34.198"
          }
        }
      },
      "dashboard": {
        "db": {
          "username": "horizon"
        }
      },
      "metering": {
        "db": {
          "username": "ceilometer"
        }
      },
      "endpoints": {
        "identity-api": {
          "host": "10.90.34.198"
        },
        "identity-admin": {
          "host": "10.90.34.198"
        },
        "image-api": {
          "host": "10.90.34.198"
        },
        "image-registry": {
          "host": "10.90.34.198"
        },
        "network-api": {
          "host": "10.90.34.198"
        },
        "volume-api": {
          "host": "10.90.34.198"
        },
        "compute-api": {
          "host": "10.90.34.198"
        },
        "compute-ec2-api": {
          "host": "10.90.34.198"
        },
        "compute-ec2-admin": {
          "host": "10.90.34.198"
        },
        "compute-xvpvnc": {
          "host": "10.90.34.198"
        },
        "compute-novnc": {
          "host": "10.90.34.198"
        }
      },
      "secret": {
        "db_passwords_data_bag": "db_passwords",
        "key_path": "/etc/chef/encrypted_data_bag_secret"
      }
    },
    "mysql": {
      "tunable": {
        "skip-name-resolve": true
      },
      "allow_remote_root": false,
      "db": {
        "bind_host": "0.0.0.0"
      },
      "remove_anonymous_users": true
    },
    "gpfs": {
      "gpfs_repo": {
         "url": "http://172.16.0.1:8080/gpfs-3.5.0-7/"
      },
      "upgrade_rpms":"http://172.16.0.1:8080/gpfs-3.5.0-10/",
      "max_data_replicas": "2",
      "default_data_replicas": "2",
      "max_metadata_replicas": "2",
      "default_metadata_replicas": "1",
      "block_size": "1M",
      "layoutMap": "cluster",
      "numNodes": "32",
      "writeAffinityDepth": "1",
      "logfilesize": "4M",
      "gpfs_device_name": "gpfs_dev",
      "cluster_name" : "gpfs_01"
    },
    "yum": {
      "rhel": {
        "url": "http://10.66.222.226:8080/redhat/rhel/$releasever/$basearch",
	      "enabled": "1"
      },
      "openstack": {
        "url": "http://10.66.222.226:8080/openstack/$releasever",
	      "enabled": "1"
      },
      "sce": {
        "url": "${SCE_REPO}",
	      "enabled": "0"
      },
      "epel": {
        "url": "http://10.66.222.226:8080/redhat/epel/$releasever/$basearch",
	      "enabled": "1"
      },
      "addition": {
        "url": "${MIDDLEWARE_REPO}",
	      "enabled": "1"
      }
    }
  }
}
