Bootstrapping Chef on devr1n40
devr1n40 Starting Chef Client, version 11.4.0[0m
devr1n40 resolving cookbooks for run list: ["yum::rhel", "yum::epel", "yum::openstack", "yum::addition", "iptables", "openstack-common", "openstack-ops-database::server", "openstack-ops-database::openstack-db", "openstack-ops-messaging::server", "openstack-identity::server", "openstack-identity::registration", "openstack-common::rcfile", "openstack-image::registry", "openstack-image::identity_registration", "openstack-image::api", "openstack-block-storage::api", "openstack-block-storage::identity_registration"][0m
devr1n40 Synchronizing Cookbooks:[0m
devr1n40   - iptables[0m
devr1n40   - nova[0m
devr1n40   - osops-utils[0m
devr1n40   - selinux[0m
devr1n40   - keystone[0m
devr1n40   - openstack-common[0m
devr1n40   - openstack-ops-database[0m
devr1n40   - openstack-ops-messaging[0m
devr1n40   - quantum[0m
devr1n40   - openstack-patch[0m
devr1n40   - sysctl[0m
devr1n40   - glance[0m
devr1n40   - cinder[0m
devr1n40   - databag[0m
devr1n40   - yum[0m
devr1n40   - apache2[0m
devr1n40   - openstack-dashboard[0m
devr1n40   - build-essential[0m
devr1n40   - python[0m
devr1n40   - openssl[0m
devr1n40   - apt[0m
devr1n40   - postgresql[0m
devr1n40   - mysql[0m
devr1n40   - openstack-identity[0m
devr1n40   - openstack-network[0m
devr1n40   - openstack-image[0m
devr1n40   - openstack-compute[0m
devr1n40   - openstack-block-storage[0m
devr1n40   - keepalived[0m
devr1n40   - qpid[0m
devr1n40   - erlang[0m
devr1n40   - rabbitmq[0m
devr1n40   - db2[0m
devr1n40   - database[0m
devr1n40 Compiling Cookbooks...[0m
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant YumKey
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant YumRepository
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant YumKey
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant YumRepository
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant OpenstackIdentityRegister
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant OpenstackIdentityRegister
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/provider/lwrp_base.rb:97: warning: already initialized constant OpenstackImageImage
devr1n40 /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.4.0/lib/chef/resource/lwrp_base.rb:51: warning: already initialized constant OpenstackImageImage
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for directory[/var/lib/mysql] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous directory[/var/lib/mysql]: /var/chef/cache/cookbooks/mysql/recipes/server.rb:109:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  directory[/var/lib/mysql]: /var/chef/cache/cookbooks/mysql/recipes/server.rb:109:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for service[mysql] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous service[mysql]: /var/chef/cache/cookbooks/mysql/recipes/server.rb:155:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  service[mysql]: /var/chef/cache/cookbooks/mysql/recipes/server.rb:219:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[MySQL-python] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[MySQL-python]: /var/chef/cache/cookbooks/openstack-identity/recipes/server.rb:39:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[MySQL-python]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:49:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[python-keystone] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[python-keystone]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:31:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[python-keystone]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:35:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[curl] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[curl]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:43:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[curl]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:39:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[openstack-glance] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[openstack-glance]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:55:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[openstack-glance]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:44:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[openstack-swift] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[openstack-swift]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:55:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[openstack-swift]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:44:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[cronie] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[cronie]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:55:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[cronie]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:44:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[python-glanceclient] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[python-glanceclient]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:55:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[python-glanceclient]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:44:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for directory[/etc/glance] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous directory[/etc/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:84:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  directory[/etc/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:56:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for directory[/var/cache/glance] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous directory[/var/cache/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:60:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  directory[/var/cache/glance]: /var/chef/cache/cookbooks/openstack-image/recipes/api.rb:62:in `from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Cloning resource attributes for package[MySQL-python] from prior resource (CHEF-3694)
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Previous package[MySQL-python]: /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:49:in `block in from_file'
devr1n40 [2013-10-10T03:46:12-05:00] WARN: Current  package[MySQL-python]: /var/chef/cache/cookbooks/openstack-block-storage/recipes/api.rb:41:in `block in from_file'
devr1n40 Converging 127 resources[0m
devr1n40 Recipe: yum::rhel[0m
devr1n40   * yum_repository[rhel] action add[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: yum::epel[0m
devr1n40   * yum_key[] action add[0m (up to date)[0m
devr1n40   * yum_repository[epel] action add[0m (up to date)[0m
devr1n40 Recipe: yum::openstack[0m
devr1n40   * yum_repository[openstack] action add[0m (up to date)[0m
devr1n40 Recipe: yum::addition[0m
devr1n40   * yum_repository[addition] action add[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: iptables::default[0m
devr1n40   * package[iptables] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[perl] action install[0m
devr1n40  (up to date)[0m
devr1n40   * execute[rebuild-iptables] action nothing[0m (up to date)[0m
devr1n40   * directory[/etc/iptables.d] action create[0m
devr1n40  (up to date)[0m
devr1n40   * cookbook_file[/usr/sbin/rebuild-iptables] action create[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: mysql::client[0m
devr1n40   * package[mysql] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[mysql-devel] action install[0m (up to date)[0m
devr1n40 Recipe: mysql::server[0m
devr1n40   * package[mysql-server] action install[0m (up to date)[0m
devr1n40   * directory[/var/run/mysqld] action create[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/var/log/mysql] action create[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/etc] action create[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/etc/mysql/conf.d] action create[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/var/lib/mysql] action create[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/var/lib/mysql] action create[0m
devr1n40  (up to date)[0m
devr1n40   * execute[mysql-install-db] action run[0m (skipped due to not_if)[0m
devr1n40   * service[mysql] action enable[0m
devr1n40  (up to date)[0m
devr1n40   * execute[assign-root-password] action run[0m
devr1n40  (skipped due to only_if)[0m
devr1n40   * template[/etc/mysql_grants.sql] action create[0m
devr1n40  (up to date)[0m
devr1n40   * execute[mysql-install-privileges] action nothing[0m
devr1n40  (up to date)[0m
devr1n40   * template[/etc/my.cnf] action create[0m
devr1n40  (up to date)[0m
devr1n40   * service[mysql] action start[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: openstack-ops-database::mysql-server[0m
devr1n40   * execute[update mysql.user] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -u root -ppassword -e "UPDATE mysql.user SET host='172.16.1.40' WHERE host='127.0.0.1'"[0m
devr1n40 [0m
devr1n40 Recipe: openstack-ops-database::openstack-db[0m
devr1n40   * execute[create database(nova) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS nova"[0m
devr1n40 [0m
devr1n40   * execute[grant user(nova) to database(nova) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON nova.* TO 'nova'@'%' IDENTIFIED BY 'nova'"[0m
devr1n40 [0m
devr1n40   * execute[create database(horizon) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS horizon"[0m
devr1n40 [0m
devr1n40   * execute[grant user(horizon) to database(horizon) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON horizon.* TO 'horizon'@'%' IDENTIFIED BY 'horizon'"[0m
devr1n40 [0m
devr1n40   * execute[create database(keystone) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS keystone"[0m
devr1n40 [0m
devr1n40   * execute[grant user(keystone) to database(keystone) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON keystone.* TO 'keystone'@'%' IDENTIFIED BY 'keystone'"[0m
devr1n40 [0m
devr1n40   * execute[create database(glance) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS glance"[0m
devr1n40 [0m
devr1n40   * execute[grant user(glance) to database(glance) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON glance.* TO 'glance'@'%' IDENTIFIED BY 'glance'"[0m
devr1n40 [0m
devr1n40   * execute[create database(ceilometer) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS ceilometer"[0m
devr1n40 [0m
devr1n40   * execute[grant user(ceilometer) to database(ceilometer) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON ceilometer.* TO 'ceilometer'@'%' IDENTIFIED BY 'ceilometer'"[0m
devr1n40 [0m
devr1n40   * execute[create database(network) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS network"[0m
devr1n40 [0m
devr1n40   * execute[grant user(network) to database(network) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON network.* TO 'network'@'%' IDENTIFIED BY 'quantum'"[0m
devr1n40 [0m
devr1n40   * execute[create database(cinder) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "CREATE DATABASE IF NOT EXISTS cinder"[0m
devr1n40 [0m
devr1n40   * execute[grant user(cinder) to database(cinder) on 172.16.1.40] action run[0m
devr1n40 [32m
devr1n40     - execute mysql -P 3306 -u root -ppassword -e "GRANT ALL ON cinder.* TO 'cinder'@'%' IDENTIFIED BY 'cinder'"[0m
devr1n40 [0m
devr1n40 Recipe: qpid::single[0m
devr1n40   * qpid_setup[setup qpid] action create[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: <Dynamically Defined Resource>[0m
devr1n40   * package[qpid-cpp-server] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[qpid-tools] action install[0m
devr1n40  (up to date)[0m
devr1n40   * service[qpidd] action nothing[0m
devr1n40  (up to date)[0m
devr1n40   * template[/etc/qpidd.conf] action create[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: openstack-identity::server[0m
devr1n40   * package[MySQL-python] action install[0m (up to date)[0m
devr1n40   * package[python-memcached] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[openstack-keystone] action upgrade[0m (up to date)[0m
devr1n40   * execute[Keystone: sleep] action nothing[0m
devr1n40  (up to date)[0m
devr1n40   * service[keystone] action enable[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/etc/keystone] action create[0m
devr1n40  (up to date)[0m
devr1n40   * directory[/etc/keystone/ssl] action create[0m
devr1n40  (skipped due to only_if)[0m
devr1n40   * file[/var/lib/keystone/keystone.db] action delete[0m (up to date)[0m
devr1n40   * execute[keystone-manage pki_setup] action run[0m (skipped due to only_if)[0m
devr1n40   * template[/etc/keystone/keystone.conf] action create[0m
devr1n40  (up to date)[0m
devr1n40   * template[/etc/keystone/default_catalog.templates] action create[0m
devr1n40  (skipped due to only_if)[0m
devr1n40   * execute[keystone-manage db_sync] action run[0m
devr1n40 [32m
devr1n40     - execute keystone-manage db_sync[0m
devr1n40 [0m
devr1n40 Recipe: openstack-identity::registration[0m
devr1n40   * bash[bootstrap-keystone-admin] action run[0m
devr1n40 [32m
devr1n40     - execute "bash"  "/tmp/chef-script20131010-12194-1mdriyh"[0m
devr1n40 [0m
devr1n40   * openstack-identity_register[Register 'admin' Tenant] action create_tenant[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'service' Tenant] action create_tenant[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'admin' Role] action create_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'Member' Role] action create_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'KeystoneAdmin' Role] action create_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'KeystoneServiceAdmin' Role] action create_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'admin' User] action create_user[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Grant 'admin' Role to 'admin' User in 'admin' Tenant] action grant_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Grant 'KeystoneAdmin' Role to 'admin' User in 'admin' Tenant] action grant_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Grant 'KeystoneServiceAdmin' Role to 'admin' User in 'admin' Tenant] action grant_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register 'monitoring' User] action create_user[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Grant 'Member' Role to 'monitoring' User in 'admin' Tenant] action grant_role[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register Identity Service] action create_service[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Register Identity Endpoint] action create_endpoint[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Create EC2 credentials for 'admin' user] action create_ec2_credentials[0m
devr1n40  (up to date)[0m
devr1n40   * openstack-identity_register[Create EC2 credentials for 'monitoring' user] action create_ec2_credentials[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: openstack-common::rcfile[0m
devr1n40   * template[/root/keystonerc] action create[0m
devr1n40  (up to date)[0m
devr1n40 Recipe: openstack-image::registry[0m
devr1n40   * package[python-keystone] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[curl] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[MySQL-python] action install[0m
devr1n40  (up to date)[0m
devr1n40   * package[openstack-glance] action upgrade[0m
devr1n40 [32m
devr1n40     - upgrade package openstack-glance from uninstalled to 2013.1.1.2-201307031307.ibm[0m
devr1n40 [0m
devr1n40   * package[openstack-swift] action upgrade[0m
devr1n40 [31m
devr1n40     * No candidate version available for openstack-swift[0m
devr1n40 [0m
devr1n40 ================================================================================[0m
devr1n40 [31mError executing action `upgrade` on resource 'package[openstack-swift]'[0m
devr1n40 ================================================================================[0m
devr1n40 
devr1n40 [0m
devr1n40 Chef::Exceptions::Package[0m
devr1n40 -------------------------[0m
devr1n40 No candidate version available for openstack-swift[0m
devr1n40 
devr1n40 [0m
devr1n40 Resource Declaration:[0m
devr1n40 ---------------------[0m
devr1n40 # In /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb
devr1n40 
devr1n40  55:   package pkg do
devr1n40  56:     action :upgrade
devr1n40  57:   end
devr1n40  58: end
devr1n40 [0m
devr1n40 
devr1n40 [0m
devr1n40 Compiled Resource:[0m
devr1n40 ------------------[0m
devr1n40 # Declared in /var/chef/cache/cookbooks/openstack-image/recipes/registry.rb:55:in `block in from_file'
devr1n40 
devr1n40 package("openstack-swift") do
devr1n40   action [:upgrade]
devr1n40   retries 0
devr1n40   retry_delay 2
devr1n40   package_name "openstack-swift"
devr1n40   cookbook_name "openstack-image"
devr1n40   recipe_name "registry"
devr1n40 end
devr1n40 [0m
devr1n40 
devr1n40 [0m
devr1n40 [2013-10-10T03:46:32-05:00] ERROR: Running exception handlers
devr1n40 [2013-10-10T03:46:32-05:00] FATAL: Saving node information to /var/chef/cache/failed-run-data.json
devr1n40 [2013-10-10T03:46:32-05:00] ERROR: Exception handlers complete
devr1n40 Chef Client failed. 18 resources updated[0m
devr1n40 [2013-10-10T03:46:32-05:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
devr1n40 [2013-10-10T03:46:32-05:00] FATAL: Chef::Exceptions::Package: package[openstack-swift] (openstack-image::registry line 55) had an error: Chef::Exceptions::Package: No candidate version available for openstack-swift
